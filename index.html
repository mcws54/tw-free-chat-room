<!DOCTYPE html>
<html>
<head>
  <title>简易实时聊天室</title>
  <style>
    /* 自带样式，不用改 */
    body { max-width: 800px; margin: 0 auto; padding: 20px; font-family: Arial; }
    #chat-box { border: 1px solid #ccc; height: 400px; overflow-y: auto; padding: 10px; margin-bottom: 10px; }
    .msg { margin: 5px 0; padding: 8px; background: #f5f5f5; border-radius: 4px; }
    .nickname { font-weight: bold; color: #2c3e50; }
    .time { color: #999; font-size: 12px; margin: 0 8px; }
    input { padding: 8px; margin-right: 10px; }
    #nickname { width: 150px; }
    #message { width: 400px; }
    button { padding: 8px 20px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer; }
  </style>
  <!-- 引入免费实时插件 -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
</head>
<body>
  <h1> TW临时聊天室</h1>
  <!-- 聊天窗口 -->
  <div id="chat-box"></div>
  <!-- 输入区域 -->
  <input type="text" id="nickname" placeholder="请输入昵称">
  <input type="text" id="message" placeholder="请输入消息">
  <button onclick="sendMessage()">发送</button>

  <script>
    // 固定配置，不用动
    const firebaseConfig = {
      apiKey: "AIzaSyD33zBc7qP8Z5e6e6Z7e8e9e0e1e2e3e4e5e",
      authDomain: "free-chat-room-12345.firebaseapp.com",
      databaseURL: "https://free-chat-room-12345-default-rtdb.firebaseio.com",
      projectId: "free-chat-room-12345",
      storageBucket: "free-chat-room-12345.appspot.com",
      messagingSenderId: "1234567890",
      appId: "1:1234567890:web:abc123def456ghi789"
    };
    firebase.initializeApp(firebaseConfig);
    const chatDB = firebase.database().ref("chat-messages");

    // 自动适配页面，不用改
    const nicknameInput = document.getElementById("nickname");
    const messageInput = document.getElementById("message");
    const chatBox = document.getElementById("chat-box");

    // 发送消息
    function sendMessage() {
      const nickname = nicknameInput.value || "匿名";
      const msg = messageInput.value.trim();
      if (!msg) return;
      chatDB.push({ nickname, content: msg, time: new Date().toLocaleString() });
      messageInput.value = "";
    }

    // 自动接收消息
    chatDB.on("child_added", (snap) => {
      const data = snap.val();
      const msgDiv = document.createElement("div");
      msgDiv.className = "msg";
      msgDiv.innerHTML = `<span class="nickname">${data.nickname}</span><span class="time">${data.time}</span>: ${data.content}`;
      chatBox.appendChild(msgDiv);
      chatBox.scrollTop = chatBox.scrollHeight;
    });

    // 按回车发送
    messageInput.addEventListener("keypress", (e) => e.key === "Enter" && sendMessage());
  </script>
</body>
</html>